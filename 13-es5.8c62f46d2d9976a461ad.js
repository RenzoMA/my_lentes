function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{isUK:function(t,e,n){"use strict";n.r(e);var o=n("ofXK"),a=n("tyNb"),i=n("3Pt+"),c=n("fXoL"),r=n("lF0S"),l=n("TgOq"),b=n("bTqV"),u=n("NFeN"),d=n("kmnG"),s=n("qFsG"),m=n("iadO"),f=n("d3UM"),p=n("FKr1"),C=n("+0xr"),g=n("M9IT");function h(t,e){if(1&t&&(c.Wb(0,"mat-option",13),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.nc("value",n.codigo),c.Cb(1),c.Kc(" ",n.nombre," ")}}function v(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"C\xf3digo"),c.Vb())}function V(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.codigo)}}function I(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Cliente"),c.Vb())}function W(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.cliente)}}function y(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Documento"),c.Vb())}function _(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.documento)}}function k(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Fecha Venta"),c.Vb())}function w(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.jc(2,"date"),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(c.kc(2,1,n.fecha))}}function O(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Total"),c.Vb())}function P(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.total)}}function S(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Estado"),c.Vb())}function D(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Kc(" ",0===n.estado?"Anulada":"Ingresada"," ")}}function G(t,e){1&t&&(c.Wb(0,"th",32),c.Ic(1,"Canal"),c.Vb())}function M(t,e){if(1&t&&(c.Wb(0,"td",33),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.canal)}}function x(t,e){1&t&&c.Rb(0,"tr",34)}var R=function(t){return{"row-selected":t}};function T(t,e){if(1&t){var n=c.Xb();c.Wb(0,"tr",35),c.ec("click",(function(){c.zc(n);var t=e.$implicit;return c.ic().updateSelected(t)})),c.Vb()}if(2&t){var o=e.$implicit,a=c.ic();c.nc("ngClass",c.pc(1,R,a.selectedId===o.codigo))}}var N,A,q=function(){return[5,10,25,100]},E=((N=function(){function t(e,n,o,a){_classCallCheck(this,t),this.router=e,this.route=n,this.canalService=o,this.ventaService=a,this.selectedId=0,this.displayedColumns=["codigo","cliente","documento","fventa","total","estado","canal"],this.dataSource=[],this.today=new Date,this.tomorrow=new Date,this.filterGroup=new i.g({nombreCliente:new i.d(""),documento:new i.d(""),inicio:new i.d,fin:new i.d,estado:new i.d(""),canal:new i.d("")})}return _createClass(t,[{key:"search",value:function(){this.loadVentas()}},{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.loadVentas()}},{key:"borrar",value:function(){this.filterGroup=new i.g({nombreCliente:new i.d(""),documento:new i.d(""),inicio:new i.d,fin:new i.d,estado:new i.d(""),canal:new i.d("")})}},{key:"loadVentas",value:function(){var t=this,e=this.filterGroup.get("nombreCliente").value,n=this.filterGroup.get("documento").value,o=this.filterGroup.get("estado").value,a=this.filterGroup.get("canal").value,i=this.filterGroup.get("inicio").value,c=this.filterGroup.get("fin").value;this.ventaService.getVentaParams(o,e,n,a,i?i.toISOString():i,c?c.toISOString():c).subscribe((function(e){t.dataSource=e}))}},{key:"nuevaVenta",value:function(t){this.router.navigate(["nuevo"],{relativeTo:this.route})}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"modificarVenta",value:function(t){this.router.navigate(["editar",this.selectedId],{relativeTo:this.route})}},{key:"anularVenta",value:function(){var t=this;this.selectedId&&this.ventaService.delete(this.selectedId).subscribe((function(){t.loadVentas()}))}}]),t}()).\u0275fac=function(t){return new(t||N)(c.Qb(a.c),c.Qb(a.a),c.Qb(r.a),c.Qb(l.a))},N.\u0275cmp=c.Kb({type:N,selectors:[["app-main"]],decls:86,vars:18,consts:[[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"filters",3,"formGroup"],[1,"input-list"],["type","text","matInput","","formControlName","nombreCliente"],["type","text","matInput","","formControlName","documento"],["matInput","","formControlName","inicio",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","fin",3,"matDatepicker"],["picker2",""],["formControlName","estado"],[3,"value"],["formControlName","canal"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-raised-button","","color","warn",3,"click"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-ventas",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cliente"],["matColumnDef","documento"],["matColumnDef","fventa"],["matColumnDef","total"],["matColumnDef","estado"],["matColumnDef","canal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(c.Wb(0,"div",0),c.Wb(1,"button",1),c.ec("click",(function(t){return e.nuevaVenta(t)})),c.Wb(2,"mat-icon"),c.Ic(3," add_shopping_cart"),c.Vb(),c.Ic(4,"Nueva Venta "),c.Vb(),c.Wb(5,"button",2),c.ec("click",(function(){return e.anularVenta()})),c.Wb(6,"mat-icon"),c.Ic(7," remove_shopping_cart"),c.Vb(),c.Ic(8,"Anular Venta "),c.Vb(),c.Vb(),c.Wb(9,"div"),c.Ic(10,"Filtrar Ventas:"),c.Vb(),c.Wb(11,"form",3),c.Wb(12,"div",4),c.Wb(13,"mat-form-field"),c.Wb(14,"mat-label"),c.Ic(15,"Nombre cliente"),c.Vb(),c.Rb(16,"input",5),c.Vb(),c.Wb(17,"mat-form-field"),c.Wb(18,"mat-label"),c.Ic(19,"Documento"),c.Vb(),c.Rb(20,"input",6),c.Vb(),c.Wb(21,"mat-form-field"),c.Wb(22,"mat-label"),c.Ic(23,"Fecha desde"),c.Vb(),c.Rb(24,"input",7),c.Rb(25,"mat-datepicker-toggle",8),c.Rb(26,"mat-datepicker",null,9),c.Vb(),c.Wb(28,"mat-form-field"),c.Wb(29,"mat-label"),c.Ic(30,"Fecha hasta"),c.Vb(),c.Rb(31,"input",10),c.Rb(32,"mat-datepicker-toggle",8),c.Rb(33,"mat-datepicker",null,11),c.Vb(),c.Wb(35,"mat-form-field"),c.Wb(36,"mat-label"),c.Ic(37,"Estado"),c.Vb(),c.Wb(38,"mat-select",12),c.Wb(39,"mat-option",13),c.Ic(40," Anulada "),c.Vb(),c.Wb(41,"mat-option",13),c.Ic(42," Ingresada "),c.Vb(),c.Vb(),c.Vb(),c.Wb(43,"mat-form-field"),c.Wb(44,"mat-label"),c.Ic(45,"Canal"),c.Vb(),c.Wb(46,"mat-select",14),c.Gc(47,h,2,2,"mat-option",15),c.jc(48,"async"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(49,"div",16),c.Wb(50,"button",1),c.ec("click",(function(){return e.search()})),c.Wb(51,"mat-icon"),c.Ic(52,"search"),c.Vb(),c.Ic(53,"Filtrar "),c.Vb(),c.Wb(54,"button",17),c.ec("click",(function(){return e.borrar()})),c.Wb(55,"mat-icon"),c.Ic(56,"clear"),c.Vb(),c.Ic(57,"Borrar "),c.Vb(),c.Vb(),c.Wb(58,"div"),c.Ic(59,"\xdaltimas ventas:"),c.Vb(),c.Wb(60,"div",18),c.Wb(61,"table",19),c.Ub(62,20),c.Gc(63,v,2,0,"th",21),c.Gc(64,V,2,1,"td",22),c.Tb(),c.Ub(65,23),c.Gc(66,I,2,0,"th",21),c.Gc(67,W,2,1,"td",22),c.Tb(),c.Ub(68,24),c.Gc(69,y,2,0,"th",21),c.Gc(70,_,2,1,"td",22),c.Tb(),c.Ub(71,25),c.Gc(72,k,2,0,"th",21),c.Gc(73,w,3,3,"td",22),c.Tb(),c.Ub(74,26),c.Gc(75,O,2,0,"th",21),c.Gc(76,P,2,1,"td",22),c.Tb(),c.Ub(77,27),c.Gc(78,S,2,0,"th",21),c.Gc(79,D,2,1,"td",22),c.Tb(),c.Ub(80,28),c.Gc(81,G,2,0,"th",21),c.Gc(82,M,2,1,"td",22),c.Tb(),c.Gc(83,x,1,0,"tr",29),c.Gc(84,T,1,3,"tr",30),c.Vb(),c.Vb(),c.Rb(85,"mat-paginator",31)),2&t){var n=c.vc(27),o=c.vc(34);c.Cb(5),c.nc("disabled",!e.selectedId),c.Cb(6),c.nc("formGroup",e.filterGroup),c.Cb(13),c.nc("matDatepicker",n),c.Cb(1),c.nc("for",n),c.Cb(6),c.nc("matDatepicker",o),c.Cb(1),c.nc("for",o),c.Cb(7),c.nc("value",0),c.Cb(2),c.nc("value",1),c.Cb(6),c.nc("ngForOf",c.kc(48,15,e.canales$)),c.Cb(14),c.nc("dataSource",e.dataSource),c.Cb(22),c.nc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.nc("matRowDefColumns",e.displayedColumns),c.Cb(1),c.nc("length",100)("pageSize",10)("pageSizeOptions",c.oc(17,q))}},directives:[b.a,u.a,i.r,i.m,i.h,d.c,d.f,s.b,i.b,i.l,i.f,m.b,m.d,d.h,m.a,f.a,p.l,o.k,C.j,C.c,C.e,C.b,C.g,C.i,g.a,C.d,C.a,C.f,C.h,o.j],pipes:[o.b,o.e],styles:[".tabla-ventas[_ngcontent-%COMP%]{margin-top:16px;min-width:700px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.actions[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:1rem}@media screen and (max-width:600px){.filter-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filters[_ngcontent-%COMP%]{display:flex}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:16px}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.filters[_ngcontent-%COMP%]{flex-wrap:wrap}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{width:100%;margin:0}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:0 0 8px;width:100%;margin-bottom:8px}.filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}"]}),N),$=n("0IaG"),U=n("GPUG"),F=((A=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.productoService=n,this.codigoControl=new i.d("",[i.q.required]),this.descripcionControl=new i.d({value:"",disabled:!0},[i.q.required]),this.cantidadControl=new i.d(1,[i.q.required,i.q.min(1)]),this.productControl=new i.d(null,[i.q.required])}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onKeyPress",value:function(t){return 8==t.charCode||0==t.charCode||13==t.charCode?null:t.charCode>=48&&t.charCode<=57}},{key:"save",value:function(){this.producto={cantidad:this.cantidadControl.value,codigo:+this.codigoControl.value,descripcion:this.productControl.value.prO_DESCRIPCION,marca:this.productControl.value.maR_NOMBRE_MARCA,punitario:+this.productControl.value.prO_PRECIO,total:this.cantidadControl.value*+this.productControl.value.prO_PRECIO},this.dialogRef.close(this.producto)}},{key:"onKeyPressCode",value:function(t){var e=this;13===t.charCode&&this.productoService.getProductoDetalle(this.codigoControl.value).subscribe((function(t){t&&(e.productControl.setValue(t),e.descripcionControl.setValue(t.prO_DESCRIPCION))}))}},{key:"isDisabled",value:function(){return this.cantidadControl.invalid||this.codigoControl.invalid||""===this.descripcionControl.value}}]),t}()).\u0275fac=function(t){return new(t||A)(c.Qb($.e),c.Qb(U.a))},A.\u0275cmp=c.Kb({type:A,selectors:[["app-agregar-producto"]],decls:21,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"control-container"],["type","text","matInput","",3,"formControl","keypress"],["type","text","matInput","",3,"formControl"],["type","number","matInput","",3,"formControl","keypress"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(c.Wb(0,"h1",0),c.Ic(1,"Agregar producto"),c.Vb(),c.Wb(2,"div",1),c.Wb(3,"div",2),c.Wb(4,"mat-form-field"),c.Wb(5,"mat-label"),c.Ic(6,"Codigo"),c.Vb(),c.Wb(7,"input",3),c.ec("keypress",(function(t){return e.onKeyPressCode(t)})),c.Vb(),c.Vb(),c.Wb(8,"mat-form-field"),c.Wb(9,"mat-label"),c.Ic(10,"Descripcion"),c.Vb(),c.Rb(11,"input",4),c.Vb(),c.Wb(12,"mat-form-field"),c.Wb(13,"mat-label"),c.Ic(14,"Cantidad"),c.Vb(),c.Wb(15,"input",5),c.ec("keypress",(function(t){return e.onKeyPress(t)})),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(16,"div",6),c.Wb(17,"button",7),c.ec("click",(function(){return e.onNoClick()})),c.Ic(18,"Cancelar"),c.Vb(),c.Wb(19,"button",8),c.ec("click",(function(){return e.save()})),c.Ic(20,"Agregar"),c.Vb(),c.Vb()),2&t&&(c.Cb(7),c.nc("formControl",e.codigoControl),c.Cb(4),c.nc("formControl",e.descripcionControl),c.Cb(4),c.nc("formControl",e.cantidadControl),c.Cb(4),c.nc("disabled",e.isDisabled()))},directives:[$.f,$.c,d.c,d.f,s.b,i.b,i.l,i.e,i.o,$.b,b.a],styles:[".control-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),A),K=n("qfBg"),j=n("teE5"),Q=n("f0Cb");function z(t,e){if(1&t&&(c.Wb(0,"mat-option",39),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.nc("value",n.codigo),c.Cb(1),c.Kc(" ",n.nombre," ")}}function H(t,e){if(1&t&&(c.Wb(0,"mat-option",39),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.nc("value",n.codigo),c.Cb(1),c.Kc(" ",n.nombre," ")}}function J(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"C\xf3digo"),c.Vb())}function L(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.codigo)}}function B(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"Descripci\xf3n"),c.Vb())}function X(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Kc(" ",n.descripcion," ")}}function Y(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"Marca"),c.Vb())}function Z(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.marca)}}function tt(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"Precio Unitario"),c.Vb())}function et(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Kc("S/ ",n.punitario,"")}}function nt(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"Cantidad"),c.Vb())}function ot(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Jc(n.cantidad)}}function at(t,e){1&t&&(c.Wb(0,"th",40),c.Ic(1,"Total"),c.Vb())}function it(t,e){if(1&t&&(c.Wb(0,"td",41),c.Ic(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Kc("S/ ",n.total,"")}}function ct(t,e){1&t&&c.Rb(0,"tr",42)}var rt=function(t){return{"row-selected":t}};function lt(t,e){if(1&t){var n=c.Xb();c.Wb(0,"tr",43),c.ec("click",(function(){c.zc(n);var t=e.$implicit;return c.ic().updateSelected(t)})),c.Vb()}if(2&t){var o=e.$implicit,a=c.ic();c.nc("ngClass",c.pc(1,rt,a.selectedId===o.codigo))}}var bt,ut,dt=[{path:"",component:E},{path:"nuevo",component:(bt=function(){function t(e,n,o,a,c,r){_classCallCheck(this,t),this.location=e,this.dialog=n,this.canalService=o,this.userService=a,this.clientService=c,this.ventaService=r,this.selectedId=0,this.displayedColumns=["codigo","descripcion","marca","punitario","cantidad","total"],this.dataSource=[],this.formGroup=new i.g({dniControl:new i.d("",[i.q.required]),idCliente:new i.d("",[i.q.required]),canalComentario:new i.d(""),vendedorControl:new i.d("",[i.q.required]),canalControl:new i.d("",[i.q.required]),direccionControl:new i.d("",[i.q.required]),fechaVentaControl:new i.d("",[i.q.required]),fechaDespachoControl:new i.d("",[i.q.required]),nombreControl:new i.d({value:"",disabled:!0},[i.q.required])})}return _createClass(t,[{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.users$=this.userService.getUsers()}},{key:"cancel",value:function(t){this.location.back()}},{key:"onKeyPress",value:function(t){var e=this;13===t.keyCode&&this.clientService.getCliente(this.formGroup.get("dniControl").value).subscribe((function(t){t&&(e.formGroup.get("nombreControl").setValue(t.nombre),e.formGroup.get("idCliente").setValue(t.codigo))}))}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"removeProduct",value:function(){var t=this;this.dataSource=this.dataSource.filter((function(e){return e.codigo!==t.selectedId}))}},{key:"openDialog",value:function(){var t=this;this.dialog.open(F,{width:"500px"}).afterClosed().subscribe((function(e){e&&(t.dataSource=[].concat(_toConsumableArray(t.dataSource),[e]))}))}},{key:"getSubTotal",value:function(){return this.dataSource.reduce((function(t,e){return t+e.total}),0)}},{key:"getIgv",value:function(){return 18*this.getSubTotal()/100}},{key:"getTotal",value:function(){return this.getSubTotal()+this.getIgv()}},{key:"save",value:function(){var t=this,e={entityVentaDetalle:this.dataSource.map((function(t){return{iD_PRODUCTO:t.codigo,vdE_NU_CANTIDAD_PEDIDO:t.cantidad,vdE_COSTO_SUBTOTAL:t.punitario,vdE_COSTO_TOTAL:1.18*t.punitario,vdE_IMPUESTOS:18*t.punitario/100}})),entityVentaInsertUpdate:{iD_CANAL_PRINCIPAL:this.formGroup.get("canalControl").value,iD_CLIENTE:this.formGroup.get("idCliente").value,iD_USUARIO:this.formGroup.get("vendedorControl").value,veN_COMENTARIO:this.formGroup.get("canalComentario").value,veN_DIRECCION_ENTREGA:this.formGroup.get("canalComentario").value,veN_FECHA_VENTA:this.formGroup.get("fechaVentaControl").value,veN_FECHA_DESPACHO:this.formGroup.get("fechaDespachoControl").value,veN_COSTO_TOTAL_VENTA:this.getTotal()}};this.ventaService.save(e).subscribe((function(){t.location.back()}),(function(t){}))}},{key:"isDisabled",value:function(){return this.formGroup.invalid||0===this.dataSource.length}}]),t}(),bt.\u0275fac=function(t){return new(t||bt)(c.Qb(o.h),c.Qb($.a),c.Qb(r.a),c.Qb(K.a),c.Qb(j.a),c.Qb(l.a))},bt.\u0275cmp=c.Kb({type:bt,selectors:[["app-nueva-venta"]],decls:116,vars:18,consts:[[1,"nueva-venta","mat-elevation-z8",3,"formGroup"],[1,"section-container"],["cdkFocusRegionStart","",1,"input-list"],["cdkFocusInitial",""],["type","text","matInput","","formControlName","dniControl",3,"keypress"],["type","text","matInput","","formControlName","nombreControl"],["matInput","","formControlName","fechaVentaControl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["type","text","matInput","","formControlName","direccionControl"],["matInput","","formControlName","fechaDespachoControl",3,"matDatepicker"],["picker2",""],["formControlName","canalControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","vendedorControl"],["cdkFocusRegionEnd",""],["matInput","","formControlName","canalComentario"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-venta",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","marca"],["matColumnDef","punitario"],["matColumnDef","cantidad"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[1,"product-actions"],["mat-icon-button","","color","accent","type","button",3,"click"],["align","right",1,"row"],[1,"col-lg-12"],["matPrefix",""],["type","text","matInput","","disabled","",3,"value"],[1,"actions"],["mat-flat-button","","type","button",3,"click"],["mat-raised-button","","color","warn","type","button"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(c.Wb(0,"form",0),c.Wb(1,"div",1),c.Wb(2,"h2"),c.Ic(3,"Registrar nueva venta"),c.Vb(),c.Wb(4,"div",2),c.Wb(5,"mat-form-field",3),c.Wb(6,"mat-label"),c.Ic(7,"Documento"),c.Vb(),c.Wb(8,"input",4),c.ec("keypress",(function(t){return e.onKeyPress(t)})),c.Vb(),c.Vb(),c.Wb(9,"mat-form-field"),c.Wb(10,"mat-label"),c.Ic(11,"Nombre Cliente"),c.Vb(),c.Rb(12,"input",5),c.Vb(),c.Wb(13,"mat-form-field"),c.Wb(14,"mat-label"),c.Ic(15,"Fecha de venta"),c.Vb(),c.Rb(16,"input",6),c.Rb(17,"mat-datepicker-toggle",7),c.Rb(18,"mat-datepicker",null,8),c.Vb(),c.Wb(20,"mat-form-field"),c.Wb(21,"mat-label"),c.Ic(22,"Direcci\xf3n de entrega"),c.Vb(),c.Rb(23,"input",9),c.Vb(),c.Wb(24,"mat-form-field"),c.Wb(25,"mat-label"),c.Ic(26,"Fecha de despacho"),c.Vb(),c.Rb(27,"input",10),c.Rb(28,"mat-datepicker-toggle",7),c.Rb(29,"mat-datepicker",null,11),c.Vb(),c.Wb(31,"mat-form-field"),c.Wb(32,"mat-label"),c.Ic(33,"Canal de venta"),c.Vb(),c.Wb(34,"mat-select",12),c.Gc(35,z,2,2,"mat-option",13),c.jc(36,"async"),c.Vb(),c.Vb(),c.Wb(37,"mat-form-field"),c.Wb(38,"mat-label"),c.Ic(39,"Vendedor"),c.Vb(),c.Wb(40,"mat-select",14),c.Gc(41,H,2,2,"mat-option",13),c.jc(42,"async"),c.Vb(),c.Vb(),c.Wb(43,"mat-form-field",15),c.Wb(44,"mat-label"),c.Ic(45,"Comentario"),c.Vb(),c.Rb(46,"textarea",16),c.Vb(),c.Rb(47,"mat-divider"),c.Vb(),c.Wb(48,"div"),c.Wb(49,"h2"),c.Ic(50,"Productos"),c.Vb(),c.Wb(51,"div",17),c.Wb(52,"table",18),c.Ub(53,19),c.Gc(54,J,2,0,"th",20),c.Gc(55,L,2,1,"td",21),c.Tb(),c.Ub(56,22),c.Gc(57,B,2,0,"th",20),c.Gc(58,X,2,1,"td",21),c.Tb(),c.Ub(59,23),c.Gc(60,Y,2,0,"th",20),c.Gc(61,Z,2,1,"td",21),c.Tb(),c.Ub(62,24),c.Gc(63,tt,2,0,"th",20),c.Gc(64,et,2,1,"td",21),c.Tb(),c.Ub(65,25),c.Gc(66,nt,2,0,"th",20),c.Gc(67,ot,2,1,"td",21),c.Tb(),c.Ub(68,26),c.Gc(69,at,2,0,"th",20),c.Gc(70,it,2,1,"td",21),c.Tb(),c.Gc(71,ct,1,0,"tr",27),c.Gc(72,lt,1,3,"tr",28),c.Vb(),c.Vb(),c.Vb(),c.Wb(73,"div",29),c.Wb(74,"button",30),c.ec("click",(function(){return e.openDialog()})),c.Wb(75,"mat-icon"),c.Ic(76,"add_circle_outline"),c.Vb(),c.Vb(),c.Wb(77,"button",30),c.ec("click",(function(){return e.removeProduct()})),c.Wb(78,"mat-icon"),c.Ic(79,"remove_circle_outline"),c.Vb(),c.Vb(),c.Vb(),c.Wb(80,"div",31),c.Wb(81,"div",32),c.Wb(82,"mat-form-field"),c.Wb(83,"mat-label"),c.Ic(84,"Sub-total"),c.Vb(),c.Wb(85,"span",33),c.Ic(86,"S/ \xa0"),c.Vb(),c.Rb(87,"input",34),c.Vb(),c.Vb(),c.Vb(),c.Wb(88,"div",31),c.Wb(89,"div",32),c.Wb(90,"mat-form-field"),c.Wb(91,"mat-label"),c.Ic(92,"Impuesto"),c.Vb(),c.Wb(93,"span",33),c.Ic(94,"S/ \xa0"),c.Vb(),c.Rb(95,"input",34),c.Vb(),c.Vb(),c.Vb(),c.Wb(96,"div",31),c.Wb(97,"div",32),c.Wb(98,"mat-form-field"),c.Wb(99,"mat-label"),c.Ic(100,"Total"),c.Vb(),c.Wb(101,"span",33),c.Ic(102,"S/ \xa0"),c.Vb(),c.Rb(103,"input",34),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Rb(104,"mat-divider"),c.Wb(105,"div",35),c.Wb(106,"button",36),c.ec("click",(function(t){return e.cancel(t)})),c.Ic(107,"Cancelar"),c.Vb(),c.Wb(108,"button",37),c.Wb(109,"mat-icon"),c.Ic(110,"delete"),c.Vb(),c.Ic(111,"Borrar "),c.Vb(),c.Wb(112,"button",38),c.ec("click",(function(){return e.save()})),c.Wb(113,"mat-icon"),c.Ic(114,"save"),c.Vb(),c.Ic(115,"Guardar "),c.Vb(),c.Vb(),c.Vb()),2&t){var n=c.vc(19),o=c.vc(30);c.nc("formGroup",e.formGroup),c.Cb(16),c.nc("matDatepicker",n),c.Cb(1),c.nc("for",n),c.Cb(10),c.nc("matDatepicker",o),c.Cb(1),c.nc("for",o),c.Cb(7),c.nc("ngForOf",c.kc(36,14,e.canales$)),c.Cb(6),c.nc("ngForOf",c.kc(42,16,e.users$)),c.Cb(11),c.nc("dataSource",e.dataSource),c.Cb(19),c.nc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.nc("matRowDefColumns",e.displayedColumns),c.Cb(15),c.nc("value",e.getSubTotal()),c.Cb(8),c.nc("value",e.getIgv()),c.Cb(8),c.nc("value",e.getTotal()),c.Cb(9),c.nc("disabled",e.isDisabled())}},directives:[i.r,i.m,i.h,d.c,d.f,s.b,i.b,i.l,i.f,m.b,m.d,d.h,m.a,f.a,o.k,Q.a,C.j,C.c,C.e,C.b,C.g,C.i,b.a,u.a,d.g,p.l,C.d,C.a,C.f,C.h,o.j],pipes:[o.b],styles:[".nueva-venta[_ngcontent-%COMP%]{padding:20px}.tabla-venta[_ngcontent-%COMP%]{min-width:700px;margin-top:16px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.section-container[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}.section-container[_ngcontent-%COMP%], .totalizado[_ngcontent-%COMP%]{padding-bottom:20px}.totalizado[_ngcontent-%COMP%]{margin-top:5px}.product-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.input-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:20px;width:300px}.actions[_ngcontent-%COMP%]{padding-top:20px;display:flex;justify-content:flex-end}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:8px}}"]}),bt)}],st=((ut=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:ut}),ut.\u0275inj=c.Nb({factory:function(t){return new(t||ut)},imports:[[a.e.forChild(dt)],a.e]}),ut),mt=n("hctd");n.d(e,"VentasModule",(function(){return pt}));var ft,pt=((ft=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:ft}),ft.\u0275inj=c.Nb({factory:function(t){return new(t||ft)},imports:[[o.c,st,mt.a,i.p]]}),ft)}}]);