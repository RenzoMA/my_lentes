function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{isUK:function(t,e,n){"use strict";n.r(e);var a,o,i=n("ofXK"),c=n("tyNb"),r=n("3Pt+"),l=n("fXoL"),b=n("aR35"),u=n("tk/3"),d=((o=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getCanales",value:function(){return this.httpClient.get("".concat(this.config.api,"/Canal/GetCanal"))}}]),t}()).\u0275fac=function(t){return new(t||o)(l.Yb(u.a),l.Yb(b.a))},o.\u0275prov=l.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),s=((a=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getVentaParams",value:function(t,e,n,a,o,i){return this.httpClient.get("".concat(this.config.api,"/Venta/GetVentaByParams?estado=").concat(t,"&nombre=").concat(e,"&nuDocumento=").concat(n,"&idCanal=").concat(a,"&fechaDesdeVenta=").concat(o,"&fechaHastaVenta=").concat(i))}},{key:"getVentas",value:function(){return this.httpClient.get("".concat(this.config.api,"/Venta/GetVenta"))}},{key:"save",value:function(t){return this.httpClient.post("".concat(this.config.api,"/Venta/PostVenta"),t)}},{key:"delete",value:function(t){return this.httpClient.delete("".concat(this.config.api,"/Venta/DeleteVenta?ID_VENTA=").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||a)(l.Yb(u.a),l.Yb(b.a))},a.\u0275prov=l.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),f=n("bTqV"),m=n("NFeN"),p=n("kmnG"),C=n("qFsG"),h=n("iadO"),g=n("d3UM"),v=n("FKr1"),T=n("+0xr"),D=n("M9IT");function U(t,e){if(1&t&&(l.Ub(0,"mat-option",13),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n.codigo),l.Cb(1),l.Fc(" ",n.nombre," ")}}function y(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"C\xf3digo"),l.Tb())}function k(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.codigo)}}function _(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Cliente"),l.Tb())}function w(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.cliente)}}function P(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Documento"),l.Tb())}function O(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.documento)}}function S(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Fecha Venta"),l.Tb())}function I(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.hc(2,"date"),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(l.ic(2,1,n.fecha))}}function M(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Total"),l.Tb())}function x(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.total)}}function V(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Estado"),l.Tb())}function A(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Fc(" ",0===n.estado?"Anulada":"Ingresada"," ")}}function N(t,e){1&t&&(l.Ub(0,"th",32),l.Dc(1,"Canal"),l.Tb())}function G(t,e){if(1&t&&(l.Ub(0,"td",33),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.canal)}}function R(t,e){1&t&&l.Pb(0,"tr",34)}var E=function(t){return{"row-selected":t}};function F(t,e){if(1&t){var n=l.Vb();l.Ub(0,"tr",35),l.cc("click",(function(){l.vc(n);var t=e.$implicit;return l.gc().updateSelected(t)})),l.Tb()}if(2&t){var a=e.$implicit,o=l.gc();l.lc("ngClass",l.nc(1,E,o.selectedId===a.codigo))}}var q,$,j,L=function(){return[5,10,25,100]},H=((q=function(){function t(e,n,a,o){_classCallCheck(this,t),this.router=e,this.route=n,this.canalService=a,this.ventaService=o,this.selectedId=0,this.displayedColumns=["codigo","cliente","documento","fventa","total","estado","canal"],this.dataSource=[],this.today=new Date,this.tomorrow=new Date,this.filterGroup=new r.g({nombreCliente:new r.d(""),documento:new r.d(""),inicio:new r.d,fin:new r.d,estado:new r.d(""),canal:new r.d("")})}return _createClass(t,[{key:"search",value:function(){this.loadVentas()}},{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.loadVentas()}},{key:"borrar",value:function(){this.filterGroup=new r.g({nombreCliente:new r.d(""),documento:new r.d(""),inicio:new r.d,fin:new r.d,estado:new r.d(""),canal:new r.d("")})}},{key:"loadVentas",value:function(){var t=this,e=this.filterGroup.get("nombreCliente").value,n=this.filterGroup.get("documento").value,a=this.filterGroup.get("estado").value,o=this.filterGroup.get("canal").value,i=this.filterGroup.get("inicio").value,c=this.filterGroup.get("fin").value;this.ventaService.getVentaParams(a,e,n,o,i?i.toISOString():i,c?c.toISOString():c).subscribe((function(e){t.dataSource=e}))}},{key:"nuevaVenta",value:function(t){this.router.navigate(["nuevo"],{relativeTo:this.route})}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"modificarVenta",value:function(t){this.router.navigate(["editar",this.selectedId],{relativeTo:this.route})}},{key:"anularVenta",value:function(){var t=this;this.selectedId&&this.ventaService.delete(this.selectedId).subscribe((function(){t.loadVentas()}))}}]),t}()).\u0275fac=function(t){return new(t||q)(l.Ob(c.c),l.Ob(c.a),l.Ob(d),l.Ob(s))},q.\u0275cmp=l.Ib({type:q,selectors:[["app-main"]],decls:86,vars:18,consts:[[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"filters",3,"formGroup"],[1,"input-list"],["type","text","matInput","","formControlName","nombreCliente"],["type","text","matInput","","formControlName","documento"],["matInput","","formControlName","inicio",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","fin",3,"matDatepicker"],["picker2",""],["formControlName","estado"],[3,"value"],["formControlName","canal"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-raised-button","","color","warn",3,"click"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-ventas",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cliente"],["matColumnDef","documento"],["matColumnDef","fventa"],["matColumnDef","total"],["matColumnDef","estado"],["matColumnDef","canal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(l.Ub(0,"div",0),l.Ub(1,"button",1),l.cc("click",(function(t){return e.nuevaVenta(t)})),l.Ub(2,"mat-icon"),l.Dc(3," add_shopping_cart"),l.Tb(),l.Dc(4,"Nueva Venta "),l.Tb(),l.Ub(5,"button",2),l.cc("click",(function(){return e.anularVenta()})),l.Ub(6,"mat-icon"),l.Dc(7," remove_shopping_cart"),l.Tb(),l.Dc(8,"Anular Venta "),l.Tb(),l.Tb(),l.Ub(9,"div"),l.Dc(10,"Filtrar Ventas:"),l.Tb(),l.Ub(11,"form",3),l.Ub(12,"div",4),l.Ub(13,"mat-form-field"),l.Ub(14,"mat-label"),l.Dc(15,"Nombre cliente"),l.Tb(),l.Pb(16,"input",5),l.Tb(),l.Ub(17,"mat-form-field"),l.Ub(18,"mat-label"),l.Dc(19,"Documento"),l.Tb(),l.Pb(20,"input",6),l.Tb(),l.Ub(21,"mat-form-field"),l.Ub(22,"mat-label"),l.Dc(23,"Fecha desde"),l.Tb(),l.Pb(24,"input",7),l.Pb(25,"mat-datepicker-toggle",8),l.Pb(26,"mat-datepicker",null,9),l.Tb(),l.Ub(28,"mat-form-field"),l.Ub(29,"mat-label"),l.Dc(30,"Fecha hasta"),l.Tb(),l.Pb(31,"input",10),l.Pb(32,"mat-datepicker-toggle",8),l.Pb(33,"mat-datepicker",null,11),l.Tb(),l.Ub(35,"mat-form-field"),l.Ub(36,"mat-label"),l.Dc(37,"Estado"),l.Tb(),l.Ub(38,"mat-select",12),l.Ub(39,"mat-option",13),l.Dc(40," Anulada "),l.Tb(),l.Ub(41,"mat-option",13),l.Dc(42," Ingresada "),l.Tb(),l.Tb(),l.Tb(),l.Ub(43,"mat-form-field"),l.Ub(44,"mat-label"),l.Dc(45,"Canal"),l.Tb(),l.Ub(46,"mat-select",14),l.Cc(47,U,2,2,"mat-option",15),l.hc(48,"async"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(49,"div",16),l.Ub(50,"button",1),l.cc("click",(function(){return e.search()})),l.Ub(51,"mat-icon"),l.Dc(52,"search"),l.Tb(),l.Dc(53,"Filtrar "),l.Tb(),l.Ub(54,"button",17),l.cc("click",(function(){return e.borrar()})),l.Ub(55,"mat-icon"),l.Dc(56,"clear"),l.Tb(),l.Dc(57,"Borrar "),l.Tb(),l.Tb(),l.Ub(58,"div"),l.Dc(59,"\xdaltimas ventas:"),l.Tb(),l.Ub(60,"div",18),l.Ub(61,"table",19),l.Sb(62,20),l.Cc(63,y,2,0,"th",21),l.Cc(64,k,2,1,"td",22),l.Rb(),l.Sb(65,23),l.Cc(66,_,2,0,"th",21),l.Cc(67,w,2,1,"td",22),l.Rb(),l.Sb(68,24),l.Cc(69,P,2,0,"th",21),l.Cc(70,O,2,1,"td",22),l.Rb(),l.Sb(71,25),l.Cc(72,S,2,0,"th",21),l.Cc(73,I,3,3,"td",22),l.Rb(),l.Sb(74,26),l.Cc(75,M,2,0,"th",21),l.Cc(76,x,2,1,"td",22),l.Rb(),l.Sb(77,27),l.Cc(78,V,2,0,"th",21),l.Cc(79,A,2,1,"td",22),l.Rb(),l.Sb(80,28),l.Cc(81,N,2,0,"th",21),l.Cc(82,G,2,1,"td",22),l.Rb(),l.Cc(83,R,1,0,"tr",29),l.Cc(84,F,1,3,"tr",30),l.Tb(),l.Tb(),l.Pb(85,"mat-paginator",31)),2&t){var n=l.sc(27),a=l.sc(34);l.Cb(5),l.lc("disabled",!e.selectedId),l.Cb(6),l.lc("formGroup",e.filterGroup),l.Cb(13),l.lc("matDatepicker",n),l.Cb(1),l.lc("for",n),l.Cb(6),l.lc("matDatepicker",a),l.Cb(1),l.lc("for",a),l.Cb(7),l.lc("value",0),l.Cb(2),l.lc("value",1),l.Cb(6),l.lc("ngForOf",l.ic(48,15,e.canales$)),l.Cb(14),l.lc("dataSource",e.dataSource),l.Cb(22),l.lc("matHeaderRowDef",e.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",e.displayedColumns),l.Cb(1),l.lc("length",100)("pageSize",10)("pageSizeOptions",l.mc(17,L))}},directives:[f.a,m.a,r.r,r.m,r.h,p.b,p.e,C.b,r.b,r.l,r.f,h.b,h.d,p.g,h.a,g.a,v.k,i.k,T.j,T.c,T.e,T.b,T.g,T.i,D.a,T.d,T.a,T.f,T.h,i.j],pipes:[i.b,i.e],styles:[".tabla-ventas[_ngcontent-%COMP%]{margin-top:16px;min-width:700px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.actions[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:1rem}@media screen and (max-width:600px){.filter-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filters[_ngcontent-%COMP%]{display:flex}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:16px}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.filters[_ngcontent-%COMP%]{flex-wrap:wrap}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{width:100%;margin:0}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:0 0 8px;width:100%;margin-bottom:8px}.filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}"]}),q),K=n("0IaG"),z=n("GPUG"),B=(($=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.productoService=n,this.codigoControl=new r.d("",[r.q.required]),this.descripcionControl=new r.d({value:"",disabled:!0},[r.q.required]),this.cantidadControl=new r.d(1,[r.q.required,r.q.min(1)]),this.productControl=new r.d(null,[r.q.required])}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onKeyPress",value:function(t){return 8==t.charCode||0==t.charCode||13==t.charCode?null:t.charCode>=48&&t.charCode<=57}},{key:"save",value:function(){this.producto={cantidad:this.cantidadControl.value,codigo:+this.codigoControl.value,descripcion:this.productControl.value.descripcion,marca:this.productControl.value.marca,punitario:10,total:10*this.cantidadControl.value},this.dialogRef.close(this.producto)}},{key:"onKeyPressCode",value:function(t){var e=this;13===t.charCode&&this.productoService.getProductos(this.codigoControl.value).subscribe((function(t){t.length>0&&(e.productControl.setValue(t[0]),e.descripcionControl.setValue(t[0].descripcion))}))}},{key:"isDisabled",value:function(){return this.cantidadControl.invalid||this.codigoControl.invalid||""===this.descripcionControl.value}}]),t}()).\u0275fac=function(t){return new(t||$)(l.Ob(K.e),l.Ob(z.a))},$.\u0275cmp=l.Ib({type:$,selectors:[["app-agregar-producto"]],decls:21,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"control-container"],["type","text","matInput","",3,"formControl","keypress"],["type","text","matInput","",3,"formControl"],["type","number","matInput","",3,"formControl","keypress"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(l.Ub(0,"h1",0),l.Dc(1,"Agregar producto"),l.Tb(),l.Ub(2,"div",1),l.Ub(3,"div",2),l.Ub(4,"mat-form-field"),l.Ub(5,"mat-label"),l.Dc(6,"Codigo"),l.Tb(),l.Ub(7,"input",3),l.cc("keypress",(function(t){return e.onKeyPressCode(t)})),l.Tb(),l.Tb(),l.Ub(8,"mat-form-field"),l.Ub(9,"mat-label"),l.Dc(10,"Descripcion"),l.Tb(),l.Pb(11,"input",4),l.Tb(),l.Ub(12,"mat-form-field"),l.Ub(13,"mat-label"),l.Dc(14,"Cantidad"),l.Tb(),l.Ub(15,"input",5),l.cc("keypress",(function(t){return e.onKeyPress(t)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div",6),l.Ub(17,"button",7),l.cc("click",(function(){return e.onNoClick()})),l.Dc(18,"Cancelar"),l.Tb(),l.Ub(19,"button",8),l.cc("click",(function(){return e.save()})),l.Dc(20,"Agregar"),l.Tb(),l.Tb()),2&t&&(l.Cb(7),l.lc("formControl",e.codigoControl),l.Cb(4),l.lc("formControl",e.descripcionControl),l.Cb(4),l.lc("formControl",e.cantidadControl),l.Cb(4),l.lc("disabled",e.isDisabled()))},directives:[K.f,K.c,p.b,p.e,C.b,r.b,r.l,r.e,r.o,K.b,f.a],styles:[".control-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),$),Y=n("qfBg"),J=((j=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getCliente",value:function(t){return this.httpClient.get("".concat(this.config.api,"/Cliente/GetClienteByDNI?dniCliente=").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||j)(l.Yb(u.a),l.Yb(b.a))},j.\u0275prov=l.Kb({token:j,factory:j.\u0275fac,providedIn:"root"}),j),W=n("f0Cb");function X(t,e){if(1&t&&(l.Ub(0,"mat-option",39),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n.codigo),l.Cb(1),l.Fc(" ",n.nombre," ")}}function Q(t,e){if(1&t&&(l.Ub(0,"mat-option",39),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n.codigo),l.Cb(1),l.Fc(" ",n.nombre," ")}}function Z(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"C\xf3digo"),l.Tb())}function tt(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.codigo)}}function et(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"Descripci\xf3n"),l.Tb())}function nt(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Fc(" ",n.descripcion," ")}}function at(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"Marca"),l.Tb())}function ot(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.marca)}}function it(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"Precio Unitario"),l.Tb())}function ct(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Fc("S/ ",n.punitario,"")}}function rt(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"Cantidad"),l.Tb())}function lt(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Ec(n.cantidad)}}function bt(t,e){1&t&&(l.Ub(0,"th",40),l.Dc(1,"Total"),l.Tb())}function ut(t,e){if(1&t&&(l.Ub(0,"td",41),l.Dc(1),l.Tb()),2&t){var n=e.$implicit;l.Cb(1),l.Fc("S/ ",n.total,"")}}function dt(t,e){1&t&&l.Pb(0,"tr",42)}var st=function(t){return{"row-selected":t}};function ft(t,e){if(1&t){var n=l.Vb();l.Ub(0,"tr",43),l.cc("click",(function(){l.vc(n);var t=e.$implicit;return l.gc().updateSelected(t)})),l.Tb()}if(2&t){var a=e.$implicit,o=l.gc();l.lc("ngClass",l.nc(1,st,o.selectedId===a.codigo))}}var mt,pt,Ct=[{path:"",component:H},{path:"nuevo",component:(mt=function(){function t(e,n,a,o,i,c){_classCallCheck(this,t),this.location=e,this.dialog=n,this.canalService=a,this.userService=o,this.clientService=i,this.ventaService=c,this.selectedId=0,this.displayedColumns=["codigo","descripcion","marca","punitario","cantidad","total"],this.dataSource=[],this.formGroup=new r.g({dniControl:new r.d("",[r.q.required]),idCliente:new r.d("",[r.q.required]),canalComentario:new r.d(""),vendedorControl:new r.d("",[r.q.required]),canalControl:new r.d("",[r.q.required]),direccionControl:new r.d("",[r.q.required]),fechaVentaControl:new r.d("",[r.q.required]),fechaDespachoControl:new r.d("",[r.q.required]),nombreControl:new r.d({value:"",disabled:!0},[r.q.required])})}return _createClass(t,[{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.users$=this.userService.getUsers()}},{key:"cancel",value:function(t){this.location.back()}},{key:"onKeyPress",value:function(t){var e=this;13===t.keyCode&&this.clientService.getCliente(this.formGroup.get("dniControl").value).subscribe((function(t){t&&(e.formGroup.get("nombreControl").setValue(t.nombre),e.formGroup.get("idCliente").setValue(t.codigo))}))}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"removeProduct",value:function(){var t=this;this.dataSource=this.dataSource.filter((function(e){return e.codigo!==t.selectedId}))}},{key:"openDialog",value:function(){var t=this;this.dialog.open(B,{width:"500px"}).afterClosed().subscribe((function(e){e&&(t.dataSource=[].concat(_toConsumableArray(t.dataSource),[e]))}))}},{key:"getSubTotal",value:function(){return this.dataSource.reduce((function(t,e){return t+e.total}),0)}},{key:"getIgv",value:function(){return 18*this.getSubTotal()/100}},{key:"getTotal",value:function(){return this.getSubTotal()+this.getIgv()}},{key:"save",value:function(){var t=this,e={entityVentaDetalle:this.dataSource.map((function(t){return{iD_PRODUCTO:t.codigo,vdE_NU_CANTIDAD_PEDIDO:t.cantidad,vdE_COSTO_SUBTOTAL:t.punitario,vdE_COSTO_TOTAL:1.18*t.punitario,vdE_IMPUESTOS:18*t.punitario/100}})),entityVentaInsertUpdate:{iD_CANAL_PRINCIPAL:this.formGroup.get("canalControl").value,iD_CLIENTE:this.formGroup.get("idCliente").value,iD_USUARIO:this.formGroup.get("vendedorControl").value,veN_COMENTARIO:this.formGroup.get("canalComentario").value,veN_DIRECCION_ENTREGA:this.formGroup.get("canalComentario").value,veN_FECHA_VENTA:this.formGroup.get("fechaVentaControl").value,veN_FECHA_DESPACHO:this.formGroup.get("fechaDespachoControl").value,veN_COSTO_TOTAL_VENTA:this.getTotal()}};this.ventaService.save(e).subscribe((function(){t.location.back()}),(function(t){}))}},{key:"isDisabled",value:function(){return this.formGroup.invalid||0===this.dataSource.length}}]),t}(),mt.\u0275fac=function(t){return new(t||mt)(l.Ob(i.h),l.Ob(K.a),l.Ob(d),l.Ob(Y.a),l.Ob(J),l.Ob(s))},mt.\u0275cmp=l.Ib({type:mt,selectors:[["app-nueva-venta"]],decls:116,vars:18,consts:[[1,"nueva-venta","mat-elevation-z8",3,"formGroup"],[1,"section-container"],["cdkFocusRegionStart","",1,"input-list"],["cdkFocusInitial",""],["type","text","matInput","","formControlName","dniControl",3,"keypress"],["type","text","matInput","","formControlName","nombreControl"],["matInput","","formControlName","fechaVentaControl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["type","text","matInput","","formControlName","direccionControl"],["matInput","","formControlName","fechaDespachoControl",3,"matDatepicker"],["picker2",""],["formControlName","canalControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","vendedorControl"],["cdkFocusRegionEnd",""],["matInput","","formControlName","canalComentario"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-venta",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","marca"],["matColumnDef","punitario"],["matColumnDef","cantidad"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[1,"product-actions"],["mat-icon-button","","color","accent","type","button",3,"click"],["align","right",1,"row"],[1,"col-lg-12"],["matPrefix",""],["type","text","matInput","","disabled","",3,"value"],[1,"actions"],["mat-flat-button","","type","button",3,"click"],["mat-raised-button","","color","warn","type","button"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(l.Ub(0,"form",0),l.Ub(1,"div",1),l.Ub(2,"h2"),l.Dc(3,"Registrar nueva venta"),l.Tb(),l.Ub(4,"div",2),l.Ub(5,"mat-form-field",3),l.Ub(6,"mat-label"),l.Dc(7,"Documento"),l.Tb(),l.Ub(8,"input",4),l.cc("keypress",(function(t){return e.onKeyPress(t)})),l.Tb(),l.Tb(),l.Ub(9,"mat-form-field"),l.Ub(10,"mat-label"),l.Dc(11,"Nombre Cliente"),l.Tb(),l.Pb(12,"input",5),l.Tb(),l.Ub(13,"mat-form-field"),l.Ub(14,"mat-label"),l.Dc(15,"Fecha de venta"),l.Tb(),l.Pb(16,"input",6),l.Pb(17,"mat-datepicker-toggle",7),l.Pb(18,"mat-datepicker",null,8),l.Tb(),l.Ub(20,"mat-form-field"),l.Ub(21,"mat-label"),l.Dc(22,"Direcci\xf3n de entrega"),l.Tb(),l.Pb(23,"input",9),l.Tb(),l.Ub(24,"mat-form-field"),l.Ub(25,"mat-label"),l.Dc(26,"Fecha de despacho"),l.Tb(),l.Pb(27,"input",10),l.Pb(28,"mat-datepicker-toggle",7),l.Pb(29,"mat-datepicker",null,11),l.Tb(),l.Ub(31,"mat-form-field"),l.Ub(32,"mat-label"),l.Dc(33,"Canal de venta"),l.Tb(),l.Ub(34,"mat-select",12),l.Cc(35,X,2,2,"mat-option",13),l.hc(36,"async"),l.Tb(),l.Tb(),l.Ub(37,"mat-form-field"),l.Ub(38,"mat-label"),l.Dc(39,"Vendedor"),l.Tb(),l.Ub(40,"mat-select",14),l.Cc(41,Q,2,2,"mat-option",13),l.hc(42,"async"),l.Tb(),l.Tb(),l.Ub(43,"mat-form-field",15),l.Ub(44,"mat-label"),l.Dc(45,"Comentario"),l.Tb(),l.Pb(46,"textarea",16),l.Tb(),l.Pb(47,"mat-divider"),l.Tb(),l.Ub(48,"div"),l.Ub(49,"h2"),l.Dc(50,"Productos"),l.Tb(),l.Ub(51,"div",17),l.Ub(52,"table",18),l.Sb(53,19),l.Cc(54,Z,2,0,"th",20),l.Cc(55,tt,2,1,"td",21),l.Rb(),l.Sb(56,22),l.Cc(57,et,2,0,"th",20),l.Cc(58,nt,2,1,"td",21),l.Rb(),l.Sb(59,23),l.Cc(60,at,2,0,"th",20),l.Cc(61,ot,2,1,"td",21),l.Rb(),l.Sb(62,24),l.Cc(63,it,2,0,"th",20),l.Cc(64,ct,2,1,"td",21),l.Rb(),l.Sb(65,25),l.Cc(66,rt,2,0,"th",20),l.Cc(67,lt,2,1,"td",21),l.Rb(),l.Sb(68,26),l.Cc(69,bt,2,0,"th",20),l.Cc(70,ut,2,1,"td",21),l.Rb(),l.Cc(71,dt,1,0,"tr",27),l.Cc(72,ft,1,3,"tr",28),l.Tb(),l.Tb(),l.Tb(),l.Ub(73,"div",29),l.Ub(74,"button",30),l.cc("click",(function(){return e.openDialog()})),l.Ub(75,"mat-icon"),l.Dc(76,"add_circle_outline"),l.Tb(),l.Tb(),l.Ub(77,"button",30),l.cc("click",(function(){return e.removeProduct()})),l.Ub(78,"mat-icon"),l.Dc(79,"remove_circle_outline"),l.Tb(),l.Tb(),l.Tb(),l.Ub(80,"div",31),l.Ub(81,"div",32),l.Ub(82,"mat-form-field"),l.Ub(83,"mat-label"),l.Dc(84,"Sub-total"),l.Tb(),l.Ub(85,"span",33),l.Dc(86,"S/ \xa0"),l.Tb(),l.Pb(87,"input",34),l.Tb(),l.Tb(),l.Tb(),l.Ub(88,"div",31),l.Ub(89,"div",32),l.Ub(90,"mat-form-field"),l.Ub(91,"mat-label"),l.Dc(92,"Impuesto"),l.Tb(),l.Ub(93,"span",33),l.Dc(94,"S/ \xa0"),l.Tb(),l.Pb(95,"input",34),l.Tb(),l.Tb(),l.Tb(),l.Ub(96,"div",31),l.Ub(97,"div",32),l.Ub(98,"mat-form-field"),l.Ub(99,"mat-label"),l.Dc(100,"Total"),l.Tb(),l.Ub(101,"span",33),l.Dc(102,"S/ \xa0"),l.Tb(),l.Pb(103,"input",34),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(104,"mat-divider"),l.Ub(105,"div",35),l.Ub(106,"button",36),l.cc("click",(function(t){return e.cancel(t)})),l.Dc(107,"Cancelar"),l.Tb(),l.Ub(108,"button",37),l.Ub(109,"mat-icon"),l.Dc(110,"delete"),l.Tb(),l.Dc(111,"Borrar "),l.Tb(),l.Ub(112,"button",38),l.cc("click",(function(){return e.save()})),l.Ub(113,"mat-icon"),l.Dc(114,"save"),l.Tb(),l.Dc(115,"Guardar "),l.Tb(),l.Tb(),l.Tb()),2&t){var n=l.sc(19),a=l.sc(30);l.lc("formGroup",e.formGroup),l.Cb(16),l.lc("matDatepicker",n),l.Cb(1),l.lc("for",n),l.Cb(10),l.lc("matDatepicker",a),l.Cb(1),l.lc("for",a),l.Cb(7),l.lc("ngForOf",l.ic(36,14,e.canales$)),l.Cb(6),l.lc("ngForOf",l.ic(42,16,e.users$)),l.Cb(11),l.lc("dataSource",e.dataSource),l.Cb(19),l.lc("matHeaderRowDef",e.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",e.displayedColumns),l.Cb(15),l.lc("value",e.getSubTotal()),l.Cb(8),l.lc("value",e.getIgv()),l.Cb(8),l.lc("value",e.getTotal()),l.Cb(9),l.lc("disabled",e.isDisabled())}},directives:[r.r,r.m,r.h,p.b,p.e,C.b,r.b,r.l,r.f,h.b,h.d,p.g,h.a,g.a,i.k,W.a,T.j,T.c,T.e,T.b,T.g,T.i,f.a,m.a,p.f,v.k,T.d,T.a,T.f,T.h,i.j],pipes:[i.b],styles:[".nueva-venta[_ngcontent-%COMP%]{padding:20px}.tabla-venta[_ngcontent-%COMP%]{min-width:700px;margin-top:16px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.section-container[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}.section-container[_ngcontent-%COMP%], .totalizado[_ngcontent-%COMP%]{padding-bottom:20px}.totalizado[_ngcontent-%COMP%]{margin-top:5px}.product-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.input-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:20px;width:300px}.actions[_ngcontent-%COMP%]{padding-top:20px;display:flex;justify-content:flex-end}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:8px}}"]}),mt)}],ht=((pt=function t(){_classCallCheck(this,t)}).\u0275mod=l.Mb({type:pt}),pt.\u0275inj=l.Lb({factory:function(t){return new(t||pt)},imports:[[c.e.forChild(Ct)],c.e]}),pt),gt=n("hctd");n.d(e,"VentasModule",(function(){return Tt}));var vt,Tt=((vt=function t(){_classCallCheck(this,t)}).\u0275mod=l.Mb({type:vt}),vt.\u0275inj=l.Lb({factory:function(t){return new(t||vt)},imports:[[i.c,ht,gt.a,r.p]]}),vt)}}]);