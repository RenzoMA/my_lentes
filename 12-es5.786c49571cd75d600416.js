function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{isUK:function(t,e,n){"use strict";n.r(e);var a,o,i=n("ofXK"),c=n("tyNb"),r=n("fXoL"),l=n("aR35"),b=n("tk/3"),u=((o=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getCanales",value:function(){return this.httpClient.get("".concat(this.config.api,"/Canal/GetCanal"))}}]),t}()).\u0275fac=function(t){return new(t||o)(r.Yb(b.a),r.Yb(l.a))},o.\u0275prov=r.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),s=((a=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getVentas",value:function(){return this.httpClient.get("".concat(this.config.api,"/Venta/GetVenta"))}},{key:"save",value:function(t){return this.httpClient.post("".concat(this.config.api,"/Venta/PostVenta"),t)}},{key:"delete",value:function(t){return this.httpClient.delete("".concat(this.config.api,"/Venta/DeleteVenta?ID_VENTA=").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||a)(r.Yb(b.a),r.Yb(l.a))},a.\u0275prov=r.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),d=n("bTqV"),f=n("NFeN"),m=n("kmnG"),p=n("qFsG"),C=n("iadO"),h=n("d3UM"),g=n("FKr1"),v=n("+0xr"),T=n("M9IT");function U(t,e){if(1&t&&(r.Ub(0,"mat-option",28),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.lc("value",n.codigo),r.Cb(1),r.Fc(" ",n.nombre," ")}}function D(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"C\xf3digo"),r.Tb())}function y(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.codigo)}}function _(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Cliente"),r.Tb())}function k(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.cliente)}}function P(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Documento"),r.Tb())}function O(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.documento)}}function w(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Fecha Venta"),r.Tb())}function S(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.hc(2,"date"),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(r.ic(2,1,n.fecha))}}function I(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Total"),r.Tb())}function M(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.total)}}function x(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Estado"),r.Tb())}function A(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Fc(" ",0===n.estado?"Anulada":"Ingresada"," ")}}function V(t,e){1&t&&(r.Ub(0,"th",29),r.Dc(1,"Canal"),r.Tb())}function R(t,e){if(1&t&&(r.Ub(0,"td",30),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.canal)}}function E(t,e){1&t&&r.Pb(0,"tr",31)}var N=function(t){return{"row-selected":t}};function F(t,e){if(1&t){var n=r.Vb();r.Ub(0,"tr",32),r.cc("click",(function(){r.vc(n);var t=e.$implicit;return r.gc().updateSelected(t)})),r.Tb()}if(2&t){var a=e.$implicit,o=r.gc();r.lc("ngClass",r.nc(1,N,o.selectedId===a.codigo))}}var $,G,q,K,L,j=function(){return[5,10,25,100]},H=(($=function(){function t(e,n,a,o){_classCallCheck(this,t),this.router=e,this.route=n,this.canalService=a,this.ventaService=o,this.selectedId=0,this.displayedColumns=["codigo","cliente","documento","fventa","total","estado","canal"],this.dataSource=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.loadVentas()}},{key:"loadVentas",value:function(){var t=this;this.ventaService.getVentas().subscribe((function(e){t.dataSource=e}))}},{key:"nuevaVenta",value:function(t){this.router.navigate(["nuevo"],{relativeTo:this.route})}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"modificarVenta",value:function(t){this.router.navigate(["editar",this.selectedId],{relativeTo:this.route})}},{key:"anularVenta",value:function(){var t=this;this.selectedId&&this.ventaService.delete(this.selectedId).subscribe((function(){t.loadVentas()}))}}]),t}()).\u0275fac=function(t){return new(t||$)(r.Ob(c.c),r.Ob(c.a),r.Ob(u),r.Ob(s))},$.\u0275cmp=r.Ib({type:$,selectors:[["app-main"]],decls:88,vars:15,consts:[[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"filters"],[1,"input-list"],["type","text","matInput",""],["matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","warn"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-ventas",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cliente"],["matColumnDef","documento"],["matColumnDef","fventa"],["matColumnDef","total"],["matColumnDef","estado"],["matColumnDef","canal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(r.Ub(0,"div",0),r.Ub(1,"button",1),r.cc("click",(function(t){return e.nuevaVenta(t)})),r.Ub(2,"mat-icon"),r.Dc(3," add_shopping_cart"),r.Tb(),r.Dc(4,"Nueva Venta "),r.Tb(),r.Ub(5,"button",2),r.cc("click",(function(){return e.anularVenta()})),r.Ub(6,"mat-icon"),r.Dc(7," remove_shopping_cart"),r.Tb(),r.Dc(8,"Anular Venta "),r.Tb(),r.Tb(),r.Ub(9,"div"),r.Dc(10,"Filtrar Ventas:"),r.Tb(),r.Ub(11,"div",3),r.Ub(12,"div",4),r.Ub(13,"mat-form-field"),r.Ub(14,"mat-label"),r.Dc(15,"Nombre cliente"),r.Tb(),r.Pb(16,"input",5),r.Tb(),r.Ub(17,"mat-form-field"),r.Ub(18,"mat-label"),r.Dc(19,"Documento"),r.Tb(),r.Pb(20,"input",5),r.Tb(),r.Ub(21,"mat-form-field"),r.Ub(22,"mat-label"),r.Dc(23,"Fecha desde"),r.Tb(),r.Pb(24,"input",6),r.Pb(25,"mat-datepicker-toggle",7),r.Pb(26,"mat-datepicker",null,8),r.Tb(),r.Ub(28,"mat-form-field"),r.Ub(29,"mat-label"),r.Dc(30,"Fecha hasta"),r.Tb(),r.Pb(31,"input",6),r.Pb(32,"mat-datepicker-toggle",7),r.Pb(33,"mat-datepicker",null,9),r.Tb(),r.Ub(35,"mat-form-field"),r.Ub(36,"mat-label"),r.Dc(37,"Estado"),r.Tb(),r.Ub(38,"mat-select"),r.Ub(39,"mat-option"),r.Dc(40," Pagado "),r.Tb(),r.Ub(41,"mat-option"),r.Dc(42," Enviado "),r.Tb(),r.Ub(43,"mat-option"),r.Dc(44," Entregado "),r.Tb(),r.Tb(),r.Tb(),r.Ub(45,"mat-form-field"),r.Ub(46,"mat-label"),r.Dc(47,"Canal"),r.Tb(),r.Ub(48,"mat-select"),r.Cc(49,U,2,2,"mat-option",10),r.hc(50,"async"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(51,"div",11),r.Ub(52,"button",12),r.Ub(53,"mat-icon"),r.Dc(54,"search"),r.Tb(),r.Dc(55,"Filtrar "),r.Tb(),r.Ub(56,"button",13),r.Ub(57,"mat-icon"),r.Dc(58,"clear"),r.Tb(),r.Dc(59,"Borrar "),r.Tb(),r.Tb(),r.Ub(60,"div"),r.Dc(61,"\xdaltimas ventas:"),r.Tb(),r.Ub(62,"div",14),r.Ub(63,"table",15),r.Sb(64,16),r.Cc(65,D,2,0,"th",17),r.Cc(66,y,2,1,"td",18),r.Rb(),r.Sb(67,19),r.Cc(68,_,2,0,"th",17),r.Cc(69,k,2,1,"td",18),r.Rb(),r.Sb(70,20),r.Cc(71,P,2,0,"th",17),r.Cc(72,O,2,1,"td",18),r.Rb(),r.Sb(73,21),r.Cc(74,w,2,0,"th",17),r.Cc(75,S,3,3,"td",18),r.Rb(),r.Sb(76,22),r.Cc(77,I,2,0,"th",17),r.Cc(78,M,2,1,"td",18),r.Rb(),r.Sb(79,23),r.Cc(80,x,2,0,"th",17),r.Cc(81,A,2,1,"td",18),r.Rb(),r.Sb(82,24),r.Cc(83,V,2,0,"th",17),r.Cc(84,R,2,1,"td",18),r.Rb(),r.Cc(85,E,1,0,"tr",25),r.Cc(86,F,1,3,"tr",26),r.Tb(),r.Tb(),r.Pb(87,"mat-paginator",27)),2&t){var n=r.sc(27),a=r.sc(34);r.Cb(5),r.lc("disabled",!e.selectedId),r.Cb(19),r.lc("matDatepicker",n),r.Cb(1),r.lc("for",n),r.Cb(6),r.lc("matDatepicker",a),r.Cb(1),r.lc("for",a),r.Cb(17),r.lc("ngForOf",r.ic(50,12,e.canales$)),r.Cb(14),r.lc("dataSource",e.dataSource),r.Cb(22),r.lc("matHeaderRowDef",e.displayedColumns),r.Cb(1),r.lc("matRowDefColumns",e.displayedColumns),r.Cb(1),r.lc("length",100)("pageSize",10)("pageSizeOptions",r.mc(14,j))}},directives:[d.a,f.a,m.b,m.e,p.b,C.b,C.d,m.g,C.a,h.a,g.k,i.k,v.j,v.c,v.e,v.b,v.g,v.i,T.a,v.d,v.a,v.f,v.h,i.j],pipes:[i.b,i.e],styles:[".tabla-ventas[_ngcontent-%COMP%]{margin-top:16px;min-width:700px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.actions[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:1rem}@media screen and (max-width:600px){.filter-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.filters[_ngcontent-%COMP%]{display:flex}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:16px}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:8px}@media screen and (max-width:600px){.filters[_ngcontent-%COMP%]{flex-wrap:wrap}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{width:100%;margin:0}.filters[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:0 0 8px;width:100%;margin-bottom:8px}.filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   .input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}"]}),$),Y=n("3Pt+"),z=n("0IaG"),B=((L=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getProductos",value:function(t){return this.httpClient.get("".concat(this.config.api,"/Producto/GetProductoByParams?parametros=").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||L)(r.Yb(b.a),r.Yb(l.a))},L.\u0275prov=r.Kb({token:L,factory:L.\u0275fac,providedIn:"root"}),L),J=((K=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.productoService=n,this.codigoControl=new Y.d(""),this.descripcionControl=new Y.d({value:"",disabled:!0}),this.cantidadControl=new Y.d(1),this.productControl=new Y.d}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onKeyPress",value:function(t){return 8==t.charCode||0==t.charCode||13==t.charCode?null:t.charCode>=48&&t.charCode<=57}},{key:"save",value:function(){this.producto={cantidad:this.cantidadControl.value,codigo:+this.codigoControl.value,descripcion:this.productControl.value.descripcion,marca:this.productControl.value.marca,punitario:10,total:10*this.cantidadControl.value},this.dialogRef.close(this.producto)}},{key:"onKeyPressCode",value:function(t){var e=this;13===t.charCode&&this.productoService.getProductos(this.codigoControl.value).subscribe((function(t){t.length>0&&(e.productControl.setValue(t[0]),e.descripcionControl.setValue(t[0].descripcion))}))}}]),t}()).\u0275fac=function(t){return new(t||K)(r.Ob(z.e),r.Ob(B))},K.\u0275cmp=r.Ib({type:K,selectors:[["app-agregar-producto"]],decls:21,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"control-container"],["type","text","matInput","",3,"formControl","keypress"],["type","text","matInput","",3,"formControl"],["type","number","matInput","",3,"formControl","keypress"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(t,e){1&t&&(r.Ub(0,"h1",0),r.Dc(1,"Agregar producto"),r.Tb(),r.Ub(2,"div",1),r.Ub(3,"div",2),r.Ub(4,"mat-form-field"),r.Ub(5,"mat-label"),r.Dc(6,"Codigo"),r.Tb(),r.Ub(7,"input",3),r.cc("keypress",(function(t){return e.onKeyPressCode(t)})),r.Tb(),r.Tb(),r.Ub(8,"mat-form-field"),r.Ub(9,"mat-label"),r.Dc(10,"Descripcion"),r.Tb(),r.Pb(11,"input",4),r.Tb(),r.Ub(12,"mat-form-field"),r.Ub(13,"mat-label"),r.Dc(14,"Cantidad"),r.Tb(),r.Ub(15,"input",5),r.cc("keypress",(function(t){return e.onKeyPress(t)})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(16,"div",6),r.Ub(17,"button",7),r.cc("click",(function(){return e.onNoClick()})),r.Dc(18,"Cancelar"),r.Tb(),r.Ub(19,"button",8),r.cc("click",(function(){return e.save()})),r.Dc(20,"Agregar"),r.Tb(),r.Tb()),2&t&&(r.Cb(7),r.lc("formControl",e.codigoControl),r.Cb(4),r.lc("formControl",e.descripcionControl),r.Cb(4),r.lc("formControl",e.cantidadControl))},directives:[z.f,z.c,m.b,m.e,p.b,Y.b,Y.l,Y.e,Y.o,z.b,d.a],styles:[".control-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),K),W=((q=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getUsers",value:function(){return this.httpClient.get("".concat(this.config.api,"/User/GetListUser"))}}]),t}()).\u0275fac=function(t){return new(t||q)(r.Yb(b.a),r.Yb(l.a))},q.\u0275prov=r.Kb({token:q,factory:q.\u0275fac,providedIn:"root"}),q),X=((G=function(){function t(e,n){_classCallCheck(this,t),this.httpClient=e,this.config=n}return _createClass(t,[{key:"getCliente",value:function(t){return this.httpClient.get("".concat(this.config.api,"/Cliente/GetClienteByDNI?dniCliente=").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||G)(r.Yb(b.a),r.Yb(l.a))},G.\u0275prov=r.Kb({token:G,factory:G.\u0275fac,providedIn:"root"}),G),Q=n("f0Cb");function Z(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.lc("value",n.codigo),r.Cb(1),r.Fc(" ",n.nombre," ")}}function tt(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.lc("value",n.codigo),r.Cb(1),r.Fc(" ",n.nombre," ")}}function et(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"C\xf3digo"),r.Tb())}function nt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.codigo)}}function at(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"Descripci\xf3n"),r.Tb())}function ot(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Fc(" ",n.descripcion," ")}}function it(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"Marca"),r.Tb())}function ct(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.marca)}}function rt(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"Precio Unitario"),r.Tb())}function lt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Fc("S/ ",n.punitario,"")}}function bt(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"Cantidad"),r.Tb())}function ut(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Ec(n.cantidad)}}function st(t,e){1&t&&(r.Ub(0,"th",40),r.Dc(1,"Total"),r.Tb())}function dt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Dc(1),r.Tb()),2&t){var n=e.$implicit;r.Cb(1),r.Fc("S/ ",n.total,"")}}function ft(t,e){1&t&&r.Pb(0,"tr",42)}var mt=function(t){return{"row-selected":t}};function pt(t,e){if(1&t){var n=r.Vb();r.Ub(0,"tr",43),r.cc("click",(function(){r.vc(n);var t=e.$implicit;return r.gc().updateSelected(t)})),r.Tb()}if(2&t){var a=e.$implicit,o=r.gc();r.lc("ngClass",r.nc(1,mt,o.selectedId===a.codigo))}}var Ct,ht,gt=[{path:"",component:H},{path:"nuevo",component:(Ct=function(){function t(e,n,a,o,i,c){_classCallCheck(this,t),this.location=e,this.dialog=n,this.canalService=a,this.userService=o,this.clientService=i,this.ventaService=c,this.selectedId=0,this.displayedColumns=["codigo","descripcion","marca","punitario","cantidad","total"],this.dataSource=[],this.formGroup=new Y.g({dniControl:new Y.d("",[Y.q.required]),idCliente:new Y.d("",[Y.q.required]),canalComentario:new Y.d(""),vendedorControl:new Y.d("",[Y.q.required]),canalControl:new Y.d("",[Y.q.required]),direccionControl:new Y.d("",[Y.q.required]),fechaVentaControl:new Y.d("",[Y.q.required]),fechaDespachoControl:new Y.d("",[Y.q.required]),nombreControl:new Y.d({value:"",disabled:!0},[Y.q.required])})}return _createClass(t,[{key:"ngOnInit",value:function(){this.canales$=this.canalService.getCanales(),this.users$=this.userService.getUsers()}},{key:"cancel",value:function(t){this.location.back()}},{key:"onKeyPress",value:function(t){var e=this;13===t.keyCode&&this.clientService.getCliente(this.formGroup.get("dniControl").value).subscribe((function(t){t&&(e.formGroup.get("nombreControl").setValue(t.nombre),e.formGroup.get("idCliente").setValue(t.codigo))}))}},{key:"updateSelected",value:function(t){this.selectedId=this.selectedId===t.codigo?0:t.codigo}},{key:"removeProduct",value:function(){var t=this;this.dataSource=this.dataSource.filter((function(e){return e.codigo!==t.selectedId}))}},{key:"openDialog",value:function(){var t=this;this.dialog.open(J,{width:"500px"}).afterClosed().subscribe((function(e){e&&(t.dataSource=[].concat(_toConsumableArray(t.dataSource),[e]))}))}},{key:"getSubTotal",value:function(){return this.dataSource.reduce((function(t,e){return t+e.total}),0)}},{key:"getIgv",value:function(){return 18*this.getSubTotal()/100}},{key:"getTotal",value:function(){return this.getSubTotal()+this.getIgv()}},{key:"save",value:function(){var t=this,e={entityVentaDetalle:this.dataSource.map((function(t){return{iD_PRODUCTO:t.codigo,vdE_NU_CANTIDAD_PEDIDO:t.cantidad,vdE_COSTO_SUBTOTAL:t.punitario,vdE_COSTO_TOTAL:1.18*t.punitario,vdE_IMPUESTOS:18*t.punitario/100}})),entityVentaInsertUpdate:{iD_CANAL_PRINCIPAL:this.formGroup.get("canalControl").value,iD_CLIENTE:this.formGroup.get("idCliente").value,iD_USUARIO:this.formGroup.get("vendedorControl").value,veN_COMENTARIO:this.formGroup.get("canalComentario").value,veN_DIRECCION_ENTREGA:this.formGroup.get("canalComentario").value,veN_FECHA_VENTA:this.formGroup.get("fechaVentaControl").value,veN_FECHA_DESPACHO:this.formGroup.get("fechaDespachoControl").value,veN_COSTO_TOTAL_VENTA:this.getTotal()}};this.ventaService.save(e).subscribe((function(){t.location.back()}),(function(t){}))}},{key:"isDisabled",value:function(){return this.formGroup.invalid||0===this.dataSource.length}}]),t}(),Ct.\u0275fac=function(t){return new(t||Ct)(r.Ob(i.h),r.Ob(z.a),r.Ob(u),r.Ob(W),r.Ob(X),r.Ob(s))},Ct.\u0275cmp=r.Ib({type:Ct,selectors:[["app-nueva-venta"]],decls:116,vars:18,consts:[[1,"nueva-venta","mat-elevation-z8",3,"formGroup"],[1,"section-container"],["cdkFocusRegionStart","",1,"input-list"],["cdkFocusInitial",""],["type","text","matInput","","formControlName","dniControl",3,"keypress"],["type","text","matInput","","formControlName","nombreControl"],["matInput","","formControlName","fechaVentaControl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["type","text","matInput","","formControlName","direccionControl"],["matInput","","formControlName","fechaDespachoControl",3,"matDatepicker"],["picker2",""],["formControlName","canalControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","vendedorControl"],["cdkFocusRegionEnd",""],["matInput","","formControlName","canalComentario"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z8","tabla-venta",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","marca"],["matColumnDef","punitario"],["matColumnDef","cantidad"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[1,"product-actions"],["mat-icon-button","","color","accent","type","button",3,"click"],["align","right",1,"row"],[1,"col-lg-12"],["matPrefix",""],["type","text","matInput","","disabled","",3,"value"],[1,"actions"],["mat-flat-button","","type","button",3,"click"],["mat-raised-button","","color","warn","type","button"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){if(1&t&&(r.Ub(0,"form",0),r.Ub(1,"div",1),r.Ub(2,"h2"),r.Dc(3,"Registrar nueva venta"),r.Tb(),r.Ub(4,"div",2),r.Ub(5,"mat-form-field",3),r.Ub(6,"mat-label"),r.Dc(7,"Documento"),r.Tb(),r.Ub(8,"input",4),r.cc("keypress",(function(t){return e.onKeyPress(t)})),r.Tb(),r.Tb(),r.Ub(9,"mat-form-field"),r.Ub(10,"mat-label"),r.Dc(11,"Nombre Cliente"),r.Tb(),r.Pb(12,"input",5),r.Tb(),r.Ub(13,"mat-form-field"),r.Ub(14,"mat-label"),r.Dc(15,"Fecha de venta"),r.Tb(),r.Pb(16,"input",6),r.Pb(17,"mat-datepicker-toggle",7),r.Pb(18,"mat-datepicker",null,8),r.Tb(),r.Ub(20,"mat-form-field"),r.Ub(21,"mat-label"),r.Dc(22,"Direcci\xf3n de entrega"),r.Tb(),r.Pb(23,"input",9),r.Tb(),r.Ub(24,"mat-form-field"),r.Ub(25,"mat-label"),r.Dc(26,"Fecha de despacho"),r.Tb(),r.Pb(27,"input",10),r.Pb(28,"mat-datepicker-toggle",7),r.Pb(29,"mat-datepicker",null,11),r.Tb(),r.Ub(31,"mat-form-field"),r.Ub(32,"mat-label"),r.Dc(33,"Canal de venta"),r.Tb(),r.Ub(34,"mat-select",12),r.Cc(35,Z,2,2,"mat-option",13),r.hc(36,"async"),r.Tb(),r.Tb(),r.Ub(37,"mat-form-field"),r.Ub(38,"mat-label"),r.Dc(39,"Vendedor"),r.Tb(),r.Ub(40,"mat-select",14),r.Cc(41,tt,2,2,"mat-option",13),r.hc(42,"async"),r.Tb(),r.Tb(),r.Ub(43,"mat-form-field",15),r.Ub(44,"mat-label"),r.Dc(45,"Comentario"),r.Tb(),r.Pb(46,"textarea",16),r.Tb(),r.Pb(47,"mat-divider"),r.Tb(),r.Ub(48,"div"),r.Ub(49,"h2"),r.Dc(50,"Productos"),r.Tb(),r.Ub(51,"div",17),r.Ub(52,"table",18),r.Sb(53,19),r.Cc(54,et,2,0,"th",20),r.Cc(55,nt,2,1,"td",21),r.Rb(),r.Sb(56,22),r.Cc(57,at,2,0,"th",20),r.Cc(58,ot,2,1,"td",21),r.Rb(),r.Sb(59,23),r.Cc(60,it,2,0,"th",20),r.Cc(61,ct,2,1,"td",21),r.Rb(),r.Sb(62,24),r.Cc(63,rt,2,0,"th",20),r.Cc(64,lt,2,1,"td",21),r.Rb(),r.Sb(65,25),r.Cc(66,bt,2,0,"th",20),r.Cc(67,ut,2,1,"td",21),r.Rb(),r.Sb(68,26),r.Cc(69,st,2,0,"th",20),r.Cc(70,dt,2,1,"td",21),r.Rb(),r.Cc(71,ft,1,0,"tr",27),r.Cc(72,pt,1,3,"tr",28),r.Tb(),r.Tb(),r.Tb(),r.Ub(73,"div",29),r.Ub(74,"button",30),r.cc("click",(function(){return e.openDialog()})),r.Ub(75,"mat-icon"),r.Dc(76,"add_circle_outline"),r.Tb(),r.Tb(),r.Ub(77,"button",30),r.cc("click",(function(){return e.removeProduct()})),r.Ub(78,"mat-icon"),r.Dc(79,"remove_circle_outline"),r.Tb(),r.Tb(),r.Tb(),r.Ub(80,"div",31),r.Ub(81,"div",32),r.Ub(82,"mat-form-field"),r.Ub(83,"mat-label"),r.Dc(84,"Sub-total"),r.Tb(),r.Ub(85,"span",33),r.Dc(86,"S/ \xa0"),r.Tb(),r.Pb(87,"input",34),r.Tb(),r.Tb(),r.Tb(),r.Ub(88,"div",31),r.Ub(89,"div",32),r.Ub(90,"mat-form-field"),r.Ub(91,"mat-label"),r.Dc(92,"Impuesto"),r.Tb(),r.Ub(93,"span",33),r.Dc(94,"S/ \xa0"),r.Tb(),r.Pb(95,"input",34),r.Tb(),r.Tb(),r.Tb(),r.Ub(96,"div",31),r.Ub(97,"div",32),r.Ub(98,"mat-form-field"),r.Ub(99,"mat-label"),r.Dc(100,"Total"),r.Tb(),r.Ub(101,"span",33),r.Dc(102,"S/ \xa0"),r.Tb(),r.Pb(103,"input",34),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Pb(104,"mat-divider"),r.Ub(105,"div",35),r.Ub(106,"button",36),r.cc("click",(function(t){return e.cancel(t)})),r.Dc(107,"Cancelar"),r.Tb(),r.Ub(108,"button",37),r.Ub(109,"mat-icon"),r.Dc(110,"delete"),r.Tb(),r.Dc(111,"Borrar "),r.Tb(),r.Ub(112,"button",38),r.cc("click",(function(){return e.save()})),r.Ub(113,"mat-icon"),r.Dc(114,"save"),r.Tb(),r.Dc(115,"Guardar "),r.Tb(),r.Tb(),r.Tb()),2&t){var n=r.sc(19),a=r.sc(30);r.lc("formGroup",e.formGroup),r.Cb(16),r.lc("matDatepicker",n),r.Cb(1),r.lc("for",n),r.Cb(10),r.lc("matDatepicker",a),r.Cb(1),r.lc("for",a),r.Cb(7),r.lc("ngForOf",r.ic(36,14,e.canales$)),r.Cb(6),r.lc("ngForOf",r.ic(42,16,e.users$)),r.Cb(11),r.lc("dataSource",e.dataSource),r.Cb(19),r.lc("matHeaderRowDef",e.displayedColumns),r.Cb(1),r.lc("matRowDefColumns",e.displayedColumns),r.Cb(15),r.lc("value",e.getSubTotal()),r.Cb(8),r.lc("value",e.getIgv()),r.Cb(8),r.lc("value",e.getTotal()),r.Cb(9),r.lc("disabled",e.isDisabled())}},directives:[Y.r,Y.m,Y.h,m.b,m.e,p.b,Y.b,Y.l,Y.f,C.b,C.d,m.g,C.a,h.a,i.k,Q.a,v.j,v.c,v.e,v.b,v.g,v.i,d.a,f.a,m.f,g.k,v.d,v.a,v.f,v.h,i.j],pipes:[i.b],styles:[".nueva-venta[_ngcontent-%COMP%]{padding:20px}.tabla-venta[_ngcontent-%COMP%]{min-width:700px;margin-top:16px;width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.section-container[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}.section-container[_ngcontent-%COMP%], .totalizado[_ngcontent-%COMP%]{padding-bottom:20px}.totalizado[_ngcontent-%COMP%]{margin-top:5px}.product-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.row-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.input-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.input-list[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:20px;width:300px}.actions[_ngcontent-%COMP%]{padding-top:20px;display:flex;justify-content:flex-end}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}@media screen and (max-width:600px){.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:8px}}"]}),Ct)}],vt=((ht=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:ht}),ht.\u0275inj=r.Lb({factory:function(t){return new(t||ht)},imports:[[c.e.forChild(gt)],c.e]}),ht),Tt=n("hctd");n.d(e,"VentasModule",(function(){return Dt}));var Ut,Dt=((Ut=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Ut}),Ut.\u0275inj=r.Lb({factory:function(t){return new(t||Ut)},imports:[[i.c,vt,Tt.a,Y.p]]}),Ut)}}]);